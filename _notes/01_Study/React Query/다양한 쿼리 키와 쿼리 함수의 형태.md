
- ğŸ“… í•™ìŠµì¼: 2025-05-19
- ğŸ§© ê´€ë ¨ íƒœê·¸: #ReactQuery 

---

## ğŸ“˜ ì£¼ì œ: ë‹¤ì–‘í•œ ì¿¼ë¦¬ í‚¤ì™€ ì¿¼ë¦¬ í•¨ìˆ˜ì˜ í˜•íƒœ


- íŠ¹ì • ì‚¬ìš©ìí•œí…Œë§Œ ë°ì´í„°ë¥¼ ë³´ì—¬ì£¼ëŠ” ê²½ìš° **ê³„ì¸µì ìœ¼ë¡œ ì¿¼ë¦¬í‚¤ë¥¼ ì§€ì •**í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤

```jsx
const username = 'codeit'; // ì„ì˜ë¡œ usernameì„ ì§€ì •
const {data:postsDataByUsername} = useQuery({
	queryKey : ['posts' , username], // ê³„ì¸µì ìœ¼ë¡œ ì¿¼ë¦¬í‚¤ ì§€ì •
	queryFn : () => getPostsByUsername(username),
});

return <div>í™ˆí˜ì´ì§€</div>

```

=> <mark style="background: #ADCCFFA6;">usernameì— ëŒ€í•œ ì¿¼ë¦¬ë§Œ ë”°ë¡œ ìºì‹±ëœë‹¤</mark>


- **ë‹¤ì–‘í•œ íŒŒë¼ë¯¸í„°ë¥¼ í™œìš©**í•´ ì¿¼ë¦¬ í‚¤ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

```jsx
const {data:postDataByUsername} = useQuery({
	queryKey : ['posts',username,{status:private}],
	queryFn : () => getPrivatePostsByUsername(username)
});
```
=> usernameê³¼  statusê°€ ê°™ì„ ë•Œë§Œ ìºì‹œë¥¼ ê³µìœ í•¨


- ì¿¼ë¦¬ í‚¤ì— ìˆëŠ” ê°’ì„ ì•„ê·œë¨¼íŠ¸ë¡œ ì „ë‹¬í•˜ê³  ì‹¶ì„ ë•Œ
```jsx
const {data:postDataByUsername} = userQuery({
	queryKey : ['posts',username],
	queryFn : ({queryKey}) => getPostsByUserId(queryKey[1]),
})
```


- ì¿¼ë¦¬ í‚¤ì—ì„œ ê°ì²´ì˜ íŠ¹ì •í•œ ê°’ì„ ê°€ì ¸ì™€ í™œìš©í•  ìˆ˜ ìˆë‹¤.
```jsx
const username = 'codeit';
const {data:postDataByUsername} = userQuery({
	queryKey : ['posts',{username}],
	qeuryFn : ({queryKey}) => {
		cosnt [key, {username}] = queryKey;
		return getPostByUserId(username);
	}
})
```
=> **queryKeyì— ê°ì²´ë¥¼ ë„£ê³  êµ¬ì¡°ë¶„í•´ í•´ì„œ ì“°ëŠ” ì´ìœ **
1. <mark style="background: #ADCCFFA6;">íŒŒë¼ë¯¸í„° ìˆœì„œì— ì˜ì¡´í•˜ì§€ ì•Šê²Œ í•˜ê¸° ìœ„í•´(ë°°ì—´ë¡œ ì „ë‹¬í•  ë•ŒëŠ” ìˆœì„œê°€ ì¤‘ìš”í•˜ê¸° ë•Œë¬¸)</mark>
2. <mark style="background: #ADCCFFA6;">í™•ì¥ì„±, ìœ ì§€ë³´ìˆ˜ì— ì¢‹ê¸° ë•Œë¬¸ì— ì‚¬ìš©</mark>


## â“ ê¶ê¸ˆí•œ ì  / ë” ì•Œì•„ë³´ê¸°

- ë‚´ í”¼ë“œ êµ¬í˜„í•˜ê¸° ì‹¤ìŠµì—ì„œ
```jsx
 else if (variant === FEED_VARIANT.MY_FEED) {
    const username = 'codeit';
    postsQueryKey = ['posts',{username}]
    postsQueryFn = ({postsQueryKey}) => {
      const [_,{username}] = postsQueryKey;
      return getPostsByUsername(username);
    }
  }
  
  const { data: postsData } = useQuery({
    queryKey: postsQueryKey,
    queryFn: postsQueryFn,
  });

```
ì´ë ‡ê²Œ ì‘ì„±í–ˆëŠ”ë° ì¿¼ë¦¬ í‚¤ê°€ ì œëŒ€ë¡œ ì „ë‹¬ì´ ì•ˆë¨

ğŸ¤” **ì™œ ì „ë‹¬ì´ ì•ˆëì„ê¹Œ?**

- TanStack QueryëŠ” `queryFn`ì—  `{queryKey}`ë¼ëŠ” <mark style="background: #ADCCFFA6;">ê³ ì •ëœ ì´ë¦„ì˜ í”„ë¡œí¼í‹°</mark>ë¥¼ ë„˜ê²¨ ì¤Œ

- ìˆ˜ì •
```jsx
postsQueryFn = ({queryKey}) => {
      const [_,{username}] = queryKey;
      return getPostsByUsername(username);
    }

```

## ğŸ” ì°¸ê³  ìë£Œ

