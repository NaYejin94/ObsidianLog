---
추가 일시: Invalid date
강의: React로 데이터 다루기
---
- [[#리액트에서 ]]
- [[#useEffect로 초기 데이터 가져오기]]
- [[#서버에서 정렬한 데이터 받아오기]]
- [[#페이지네이션이란?]]
- [[#데이터 더 불러오기]]
- [[#비동기로 State를 변경할 때 주의할 점]]
- [[#네트워크 로딩 처리하기]]
- [[#네트워크 에러 처리하기]]

---

# 리액트에서 [[fetch]] 사용하기

```JavaScript
// api.jsx
export async function getReviews() {
  const response = await fetch("https://learn.codeit.kr/9117/film-reviews");
  const body = await response.json();
  return body;
}

// app.jsx
 const handelLoadClick = async () => {
    const { reviews } = await getReviews();
    setItems(reviews);
  };
```

# useEffect로 초기 데이터 가져오기

- useEffect는 아규먼트로 콜백과 디펜던시 리스트를 받는다

```JavaScript
useEffect(()=>{
    handelLoad();
  },[]);
```

# 서버에서 정렬한 데이터 받아오기

- useEffect를 호출하면 리액트는 곧바로 콜백 함수를 실행하는 게 아니라 콜백함수를 예약해뒀다가 렌더링이 끝나고 나면 실행해줌
- 그 다음부터는 디펜던시 리스트를 비교해서 기억했던 값이랑 다른 경우에만 콜백을 실행해 줌

  

# 페이지네이션이란?

: 데이터를 나눠서 제공하는 것

- **오프셋** 기반 페이지네이션
    - offset = 상쇄하다 = 지금까지 받아온 데이터의 개수
    - 개수를 기준으로 데이터를 나눔
- **커서** 기반 페이지네이션
    - cursor = 데이터를 가리키는 값 = 지금까지 받은 데이터를 표시한 책갈피
    - 데이터의 중복이나 빠짐없이 가져올 수 있음

# 데이터 더 불러오기

- count : 총 데이터 개수
- hasNext : 다음 데이터가 있는지 (true / false)

# 비동기로 State를 변경할 때 주의할 점

```JavaScript
setItems((previtems) => [...previtems, ...reviews]);
```

# 네트워크 로딩 처리하기

```JavaScript
const handleLoad = async (options) => {
    let result;
    try {
      setIsLoading(true);
      result = await getReviews(options);
    } catch (e) {
      console.log(e);
      return;
    } finally {
      setIsLoading(false);
    }
```

# 네트워크 에러 처리하기