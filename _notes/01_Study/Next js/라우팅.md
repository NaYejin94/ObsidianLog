---
추가 일시: Invalid date
강의: Next.js로 웹사이트 만들기
---
- [[#파일시스템 기반 라우팅이란?]]
    - [[#라우팅]]
    - [[#파일시스템 기반 라우팅]]
- [[#페이지 나누기]]
    - [[#다이나믹 라우팅]]
- [[#Link 컴포넌트]]
    - [[#풀 리로드(full Reload)]]
- [[#useRouter : 쿼리 사용하기]]
    - [[#경로에 있는 이름인 Param 값을 가져오는 법]]
    - [[#쿼리스트링(querystring) 값을 가져오는 법]]
- [[#useRouter : 페이지 이동하기]]
- [[# 리다이렉트]]
- [[#커스텀 App과 Document]]
- [[#Context 활용하기]]

---

  

# 파일시스템 기반 라우팅이란?

  

### **라우팅**

- 어떤 주소에 어떤 페이지를 보여줄지 정하는 것

### **파일시스템 기반 라우팅**

- 파일의 경로가 주소에 매칭되는 라우팅 방식

  

---

# 페이지 나누기

  

- pages폴더 안에 자바스크립트 파일을 만들면 그게 곧 페이지가 된다

  

- `pages/index.html` → 홈페이지

  

### 다이나믹 라우팅

- 여러 주소를 하나의 페이지 컴포넌트에서 처리하는 것

`pages/products/[id].js`

⇒ products/1 , prducts/2, ….. 에 [id].js의 내용이 보인다

  

---

# Link 컴포넌트

### 풀 리로드(full Reload)

- 새로 고침 하듯이 회면 전체를 다운받는 것

  

- Link 컴포넌트를 쓰면 페이지 전체를 불러오는게 아니라 필요한 데이터만 불러오기 때문에
    
    이동 속도도 빨라지고 넘어가는 동작도 부드럽다
    

  

---

# useRouter : 쿼리 사용하기

  

### 경로에 있는 이름인 Param 값을 가져오는 법

```TypeScript
export default function Product() {
	const router = useRouter();
	const {id} = router.query; 
	// 파일명에 있는 id
	// 만약 products/[productId].js 이면
	// const {productId} = router.query;
	
	return <div>Product 페이지입니다.</div>
}
```

  

### 쿼리스트링(querystring) 값을 가져오는 법

  

```TypeScript
주소창 : /search?q=티셔츠
```

```TypeScript
export default function Search() {
	const router = useRouter();
	const {q} = router.query;
	
	return (
    <div>
      <h1>search 페이지 입니다</h1>
      <h2>{q} 검색결과</h2>
    </div>
  );
}
```

  

---

# useRouter : 페이지 이동하기

```TypeScript
// /components/SearchForm.js
export default function SearchForm({initialValue=""}) {
  const router = useRouter();
  const [value, setValue] = useState(initialValue);

  function handleChange(e) {
    setValue(e.target.value);
  }

function handleSubmit(e) {
	e.preventDefault();
	router.push(`/search?q=${value}`);
}

return (
	<form onSubmit={handleSubmit}>
		<input name="q" value={value} onChange={handleChange}/>
		<button>검색</button>
	</form>
)
```

```TypeScript
// /pages/search.js
export default function Search() {
  const router = useRouter();
  const { q } = router.query;

  return (
    <div>
      <h1>search 페이지 입니다</h1>
      <SearchForm initialValue={q} />
      <h2>{q} 검색결과</h2>
    </div>
  );
}
```

  

---

# 리다이렉트

  

`next.config.js`

```TypeScript

  async redirects() {
    return [
      {
        source: '/about',
        destination: '/',
        permanent: true,
      },
    ]
  },
```

- `source` : 리다이렉트 처리를 할 주소
- `destination` : 이동시킬 주소
- `permanent` : response status code를 정하는 것, 웹 브라우저에게 주소가 바뀌었다는 사실을 저장하게 하려면 true
    - `permanent: false`로 하면 307 Temporary Redirect를 하고, `permanent: true`로 하면 브라우저에 리다이렉트 정보를 저장하는 308 Permanent Redirect를 할 수 있었습니다.

---

# 커스텀 App과 Document

  

- 공통된 컴포넌트가 있는경우 `App`컴포넌트에 구현하면 된다.
- `_document.js`
    
    : HTML 코드의 뼈대를 만드는 용도,
    
    **: 서버에서 렌더링할 때만 실행하고 클라이언트에서 렌더링할 때는 실행하지 않는다.**
    
    **: 인터랙티브한 자바스크립트 코드를 쓰면 동작하지 않는다.**
    

  

---

# Context 활용하기

- App 컴포넌트에서 Context를 사용하면 사이트 전체에서 활용할 수 있다.

  

---